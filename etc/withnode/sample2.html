<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8" />
  <title>quiz</title>
</head>
<canvas id='c1'></canvas>

<body>
  <script>
    allShutudai =
      [
        [
          [
            [
              "cut",
              "カット"
            ],
            [
              "found",
              "見つかった"
            ],
            [
              "caught",
              "捕まった"
            ]
          ],
          [
            "felt",
            "フェルト"
          ]
        ],
        [
          [
            [
              "built",
              "建てた"
            ],
            [
              "caught",
              "捕まった"
            ],
            [
              "found",
              "見つかった"
            ]
          ],
          [
            "bought",
            "買った"
          ]
        ],
        [
          [
            [
              "bought",
              "買った"
            ],
            [
              "built",
              "建てた"
            ],
            [
              "felt",
              "フェルト"
            ]
          ],
          [
            "caught",
            "捕まった"
          ]
        ],
        [
          [
            [
              "built",
              "建てた"
            ],
            [
              "felt",
              "フェルト"
            ],
            [
              "bought",
              "買った"
            ]
          ],
          [
            "cut",
            "カット"
          ]
        ],
        [
          [
            [
              "bought",
              "買った"
            ],
            [
              "built",
              "建てた"
            ],
            [
              "cut",
              "カット"
            ]
          ],
          [
            "found",
            "見つかった"
          ]
        ],
        [
          [
            [
              "found",
              "見つかった"
            ],
            [
              "cut",
              "カット"
            ],
            [
              "caught",
              "捕まった"
            ]
          ],
          [
            "built",
            "建てた"
          ]
        ]
      ];

    const shuffleArray = array => {
      for (let i = array.length - 1; i > 0; i--) {
        let r = Math.floor(Math.random() * (i + 1));
        let tmp = array[i];
        array[i] = array[r];
        array[r] = tmp;
      }
      return array
    }

    let score = document.createElement("a");
    score.setAttribute("id", "score");
    score.textContent = "0";
    document.querySelector("body").appendChild(score)

    let numberOfQuestions = document.createElement("a");
    numberOfQuestions.setAttribute("id", "numberOfQuestions");
    numberOfQuestions.textContent = `/${allShutudai.length}`;
    document.querySelector("body").appendChild(numberOfQuestions)

    for (let a of allShutudai) {
      let block = document.createElement("div");
      block.setAttribute("id", `mondaiBlock_${allShutudai.indexOf(a)}`);
      document.querySelector("body").appendChild(block)

      let text = document.createElement("text"); text.setAttribute("class", "question");
      text.textContent = `${a[1][0]}`;
      block.insertBefore(text, null)
      oneShutudai = shuffleArray(a[0].concat([[[a[1], "seikai"]]]));

      for (let i of oneShutudai) {
        let div = document.createElement("div"); div.setAttribute("class", "bar"); block.insertBefore(div, null)

        let input = document.createElement("input");
        input.setAttribute("class", "question");
        input.setAttribute("type", "button");
        if (i[0][1] === "seikai") {
          input.setAttribute("value", i[0][0][1]);
          input.setAttribute("name", i[0][1]);
        } else {
          input.setAttribute("value", i[1]);
        }
        div.appendChild(input);
      }
      let br = document.createElement("br"); block.insertBefore(br, null)
    }

    let allButton = document.querySelectorAll('body > div > div > input');
    allButton.forEach(button => {
      button.addEventListener('click', function () {
        if (button.name === "seikai") {
          let mondaiBlock_Num = button.parentElement.parentElement.id;
          document.getElementById(`${mondaiBlock_Num}`).parentNode.removeChild(document.getElementById(`${mondaiBlock_Num}`))
          score.textContent = (score.textContent - 0) + 1
        } else {
          console.log("fuseikai")
        };
      }, false);
    })





  </script>
</body>

</html>