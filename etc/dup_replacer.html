<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
<script src="./vue3.js"></script>
<script src="./localforage.js"></script>
<script src="./ramda.@0.28.0.js"></script>
<style>
/* grid layout */
/* grid layout */
.app {
  display: grid;
/* grid-auto-rows: auto; */
grid-auto-columns: auto;
  /* grid-template-columns: repeat(12, 1fr); */
  /* grid-template-rows: repeat(3, 1fr); */
    grid-template-rows: 0.2fr 2fr 1fr;
  grid-gap: 0px;
  grid-template-areas:
    "button"
    "textarea"
    "list";
}
.button_parent{
    display: grid;
    grid-area: button;
      grid-template-rows: 1fr;
      grid-template-columns: repeat(3, 1fr);
    /* grid-template-columns: auto; */
    /* grid-template-rows: auto; */
}
.button{
  /* grid-area: button; */
    /* height: 5rem; */
    /* width: auto; */
}
.textarea_parent {
  display: grid;
grid-auto-rows: auto;
/* grid-auto-columns: auto; */
  /* grid-template-columns: repeat(4, 1fr); */
  grid-template-columns: 2fr 1fr 1fr 2fr;
  /* grid-template-rows: repeat(12, 1fr); */
  grid-gap: 0px;
  /* grid-template-areas:
    "header header header header header header header header header header header header"
    "main main main main main main main main main main main main"
    "footer footer footer footer footer footer footer footer footer footer footer footer"; */
}
</style>
</head>
<body>
<div class="app">

<div class="button_parent">
<input type="button" value="save_data_to_all_save" @click="save_data_to_all_save" class="button">
<input type="button" value="sample_en" @click="sample_en" class="button">
<input type="button" value="sample_ja" @click="sample_ja" class="button">
</div>

<div class="textarea_parent">
<textarea name="a" id="a" cols="5" rows="10" v-model="a" @input=""></textarea>
<textarea name="b" id="b" cols="5" rows="10" v-model="b"></textarea>
<textarea name="c" id="c" cols="5" rows="10" v-model="c"></textarea>
<textarea name="d" id="d" cols="5" rows="10" v-model="result">{{ result }}</textarea>
</div>

<ul>
<li v-for="(item, index) in all_save" @click="save_data_set(index)">
<button @click="save_data_set(index)">save_data_set</button>
{{ index }}: {{ item }}
<button @click="save_data_delete(index)">save_data_delete</button>
</li>
</ul>

</div>
</body>
<script>
const app = Vue.createApp({
    data() {
        return {
            a: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
            b: 'BC\nEF\nHI\nXY',
            c: 'bc\nef\nhi\nxy',
            save_data: '',
            all_save: [],
        }
    },
    computed: {
        result: function () {
            this.save_data_load();
            this.refrech_save_data();

            let tmp = this.a;
            R.zip(
                this.b.split("\n"),
                this.c.split("\n"))
                    .forEach(V=>
                        tmp = tmp.replaceAll(V[0],
                                                V[1]));
            return tmp;
        }
    },
    mounted() {
    },
    beforeUpdated() {
    },
    updated() {
    },
    methods: {
        sample_en(){
                    this.a = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
                    this.b = 'BC\nEF\nHI\nXY';
                    this.c = 'bc\nef\nhi\nxy';
        },
        sample_ja(){
                    this.a = `いろはにほへと　ちりぬるを
        わかよたれそ　つねならむ
        うゐのおくやま　けふこえて
        あさきゆめみし　ゑひもせす`;
                    this.b = 'はに\nなら\nゆめ\nもせ';
                    this.c = 'hani\nnara\nyume\nmose';
        },
        refrech_save_data() {
                    this.save_data = [
                        this.a,
                        this.b,
                        this.c,
                    ];
        },
        save_data_to_all_save() {
            this.all_save.push(this.save_data);
            localStorage.setItem('key', JSON.stringify(this.all_save));
        },
        save_data_load() {
            this.all_save = JSON.parse(localStorage.getItem('key'));
        },
        save_data_set(INDEX) {
            [this.a, this.b, this.c] = this.all_save[INDEX];
        },
        save_data_delete(INDEX) {
            if (window.confirm("Do you really want to delete??🦖\n本当に削除する？?🦕")) {
                this.all_save.splice(INDEX, 1);
                localStorage.setItem('key', JSON.stringify(this.all_save));
            }
        },
    }
}).mount('.app');
</script>
</html>