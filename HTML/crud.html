<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>crud</title>
</head>
<body>
    <div class="data"></div>
    <button onclick="restRead();">restRead</button>
</body>
<script>
    let endpoint = "https://marred-mint-art.glitch.me/";
    const editLocalData = (param) => document.querySelector(".data").textContent = param;

    const exe = async (param) => {
        const prm  = param ? param : "";
        endpoint = endpoint + prm;
        let foo = await fetch(endpoint);
        let bar = await foo.json();
        return await bar;
    };
    let res;
    // const restRead = async () => {
    //     res = await exe();
    //     await editLocalData(res);
    // };
    const restRead = async () => {
        res = await exe("readall");
        await editLocalData(res);
    };

</script>




<script class="glitchcom_serverjs">
// const express = require('express');
// const app = express();
// const https = require('https');
// const fs = require('fs');
// const Database = require('better-sqlite3');
// const db = new Database('.data/tmp.sqlite3', { verbose: console.log });

// var HTTP_PORT = 8000
// app.listen(HTTP_PORT, () => {
//     console.log("Server running on port %PORT%".replace("%PORT%", HTTP_PORT))
// });
// app.get('/', function (req, res) {
//     res.header("Access-Control-Allow-Origin", "*");
//   res.header("Access-Control-Allow-Headers", "Origin, X-Requested-With, Content-Type, Accept");

//     res.json(
//       "this is response text"
//     )
// });
// app.get("/insert", (req, res, next) => {
//     const info = req.query.info;
//   function serialize(){
//       db.prepare('INSERT INTO lorem (info) values(?)').run(info);
//   }
//     serialize();
//     res.json({
//         "message": "success"
//         ,
//         "data": req.query.info
//     })
// });
// app.get("/create", (req, res, next) => {
//   function serialize(){
//       db.prepare(`CREATE TABLE lorem(
// info TEXT NOT NULL
// )`).run();
//   }
//     serialize();
//     res.json({
//         "message": "success"
//     })
// });
// app.get("/readall", (req, res, next) => {
//   function serialize(){
//     return db.prepare('SELECT * FROM lorem').get();
//   }
//     const table = serialize();
//     res.json({
//         "message": "success"
//         ,
//         "data": table
//     })
// });
</script>
<script class="glitchcom_sqljs">
// const Database = require('better-sqlite3');
// const db = new Database('.data/tmp.sqlite3', { verbose: console.log });
// function serialize(){
//     db.prepare(`DROP TABLE lorem`).run();
// }
// serialize();
<script>
</html>