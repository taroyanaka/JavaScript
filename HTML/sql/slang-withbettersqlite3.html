<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>slang-withbettersqlite3</title>
</head>
<body>
<textarea name="textarea-0" cols="10" rows="10" class="textarea-0"></textarea>
<button onclick="fn()">fn()</button>

<div class="parentTmp-0"></div>

<textarea name="textarea-2" cols="10" rows="10" class="textarea-2"></textarea>

<div class="parentTmp-1"></div>

<script>
document.querySelector(".textarea-0").value = `db.prepare('`;
document.querySelector(".textarea-2").value = `').run(info);`;

const fn = () => {
    document.querySelectorAll(".textarea-0, .textarea-2").forEach(V => {V.readOnly = true; V.style.backgroundColor = "gray"});
    const length = document.querySelectorAll(".parentTmp-0 > .textarea-1").length;
    document.querySelector(`.parentTmp-0`).innerHTML =
    document.querySelector(`.parentTmp-1`).innerHTML += 
        `<textarea name="textarea-1" data-id="${length}" cols="10" rows="10" class="textarea-1 textarea-1-${length}" oninput="fn2(event);">${length}</textarea>`;
};
const fn1 = (id) => document.querySelector(".textarea-0").value +
            document.querySelector(`.parentTmp-0 > .textarea-1-${id}`).value +
            document.querySelector(".textarea-2").value;
const fn2 = (event) => document.querySelector(`.parentTmp-1 > .textarea-1-${event.target.dataset.id}`).value = fn1(event.target.dataset.id);


</script>
</body>
</html>