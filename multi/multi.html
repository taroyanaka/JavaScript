<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>multi</title>

<!-- todo -->
<!--


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
content load is too slow
 => any way to improve it?
    => it will be better when server is ready(or other way to load content(download all and process it faster))
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

make canvas error problem => make img src files from texts
    // I made a mistake in numbering this sample data, but it's sample data, so I'll skip over this mistake and proceed.
    // https://raw.githubusercontent.com/taroyanaka/javascript/master/image/image_for_multi_file_name.txt
         => ✅
clear current filter and sorter
    => ✅
display each tag volume
    => ✅
add the prefecture name as a kind of tag to the tag list (remove the array of prefecture names)
    => ✅
    make sorter by prefucture tag volume
        => ✅
set img with the number(like a item price)
    => ✅
taggingable to images
    => ✅
add map and set map data(make map data??)
    => use ez sample data(City, ward, town, village, city hall Address list?)
    => 🛠
full-text search (checkboxes for skewering of text or text tags only or image tags only or multiple images, respectively)
    => 🛠
change multiple data architecture and set multiple data for multiple services
    => 🛠


!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
aaaaaaaaaand, I'm going to do this for a new project.(MAKE 💵💵💵💵💵!!!!!!)
Put temporary data into the actual store to discuss and consult with the service,
listen to the current situation, learn about the overall picture of the industry and actual users,
and discuss price range and usage methods.
(It is especially important to know the best and easiest way to introduce and operate the service.)
!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!



Find someone who is originally trying to make a map or something.
Find at events
Join a town community
Join a shopping district community
　＝＞Enter the shopping district and local community
    　=> It also leads to introduction of stores.
Attendees of Koenji events (people outside of Koenji)
    ＝＞Connect to other shopping districts
Chamber of Commerce events
Cross-industrial exchange meetings
Press releases
Local free magazines
Local newspaper

I want to speak to someone part time
    Local person who wants to contribute

Senbero
General store
Vintage sundries
Post office postcard price service to distribute in the area

Put in one contact.
Posting and zooming for a briefing (explain to many people at once)

Terms of Use
Privacy policy

Decide also which stores are NG

Differences from the store's page in google search results
Are they privately owned only (or no chain stores?)

Update information when the store goes out of business (delete by yourself or by the store)

Allow users to register stores (spot deletion)
    => 🛠.
Allow user base to register store information ！！！！ (Priority)
Favorite stores
Information not available on Google
What the competition is doing on Instagram.
    => 🛠.

Use social networking sites or influencers

Get your shoppers to register with the public.
    => 🛠

Ideas to expand horizontally

Do both online and in real life

Find accounts on Twitter for Koenji and other places (Koenji (Shimokita) Keizai Shimbun => Press release)
Create an account for your service.
    => 🛠.
be prepared to spend a year or so.
    => I want to do it somehow, somehow (do it on a monthly basis)
        => ?

Startup pitch (sign up for newsletter)
Just register for the newsletter.

Concierge appointment with Mr. Tsuchikura and Ms. Hatano nomination.
    => 🛠?
Attend all seminars.
    => 🛠

-->

<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/svg.js/3.1.2/svg.js" integrity="sha512-WXWhnFUmZx+snPw8v2JjWQ0cdLUCLxTXhyqiZb7G5pkZZEGPBgVSzILSpkPK9haxW75sX5znfF08rsVnf6BUlw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script> -->
<link rel="stylesheet" href="./reset.css">

<!-- https://animate.style/ -->
<!-- https://acchou.github.io/html-css-cheat-sheet/animation.html -->
<!-- <link rel="stylesheet" href="./animate@3.5.2.css"> -->
<!-- <link rel="stylesheet" href="./cssui.min.css"> -->
<!-- <link rel="stylesheet" href="./cssui.tabs.min.css"> -->

<script src="./vue@3.2.36.global.prod.js"></script>
<script src="./ramda.@0.28.0.js"></script>
<script src="./prefectures_of_japan_list_alphabet_1222.js"></script>

<link rel="stylesheet" href="./cssui.min.css">

<style>
/* grid layout */
.app{
    display: grid;
    grid-template-columns: 1fr 1fr 1fr;
    grid-template-rows: 1fr 1fr 1fr;
    grid-template-areas:
        "header header header"
        "main main article"
        "footer footer footer";
    height: 100vh;
    width: 100vw;
}
header{
grid-area: header;
background-color: #f1f1f1;
height: 3rem;
    width: 100vw;
}
.tracker{
    position: fixed;
    top: 0rem;
    background-color: #f1f1f1;
    height: 3rem;
    width: 100vw;
}
main{
    grid-area: main;
    background-color: aliceblue;
}
article{
    grid-area: article;
    background-color: antiquewhite;

    display: grid;
    /* grid-template-columns: 1fr 1fr 1fr; */
    grid-template-columns: 1fr 1fr;
}
.article_button{
    width: 100%;
    height: 2rem;
    /* font-size: 0.5rem; */
white-space: nowrap;
}
footer{
    grid-area: footer;
    background-color: goldenrod;
    height: 3rem;
    width: 100vw;
}

header ul, footer ul{
    display: flex;
    justify-content: space-around;
}
header ul li, footer > ul > li{
display: inline-block;
}
.image_data_set{
    /* background-color: pink; */
    /* margin: 0; */
    /* padding: 0; */
}
.image_data{
    background-color: peachpuff;
    /* content: url(https://raw.githubusercontent.com/taroyanaka/javascript/master/HTML/pwa-builder-test3/1_1.png); */
}
.image_list_to_inline_tag_and_smaller{
    display: inline-block;
    width: 6rem;
    height: 4rem;
}
.image_tag{
    display: inline-block;
    width: 3rem;
    height: 2rem;
}
</style>
</head>
<body class="app">
<header>
<div class="tracker">
<ul>
<li>abc</li>
<li>abc</li>
<li>abc</li>
<li>abc</li>
<li>abc</li>
<li>abc</li>
</ul>
</div>
</header>
<main>
<details data-dropdown>
<summary>open_$data</summary>
    <span>{{ $data }}</span>
</details>

<div>
<span>{{ current_filter }}</span>
<span>{{ current_sorter }}</span>
</div>
<button @click="clear_current_filter_and_sorter">clear_current_filter_and_sorter</button>

<ul class="content">
    <template v-for="(LI_DATA_ARRAY, LI_DATA_ARRAY_INDEX) in content_data">
        <!-- <div class="image_data_set" :data-word="LI_DATA_ARRAY[2]">
        <img src="" :alt="" class="image_data">
        <canvas width="100" height="80"></canvas>
        </div> -->

        <li>
            <ul>
            <template v-for="(LI_DATA, LI_DATA_INDEX) in LI_DATA_ARRAY">
                <li>{{ LI_DATA_INDEX }}: {{ LI_DATA }}</li>
                <template v-if="LI_DATA_INDEX === (LI_DATA_ARRAY.length-1)" v-for="(IMAGE_DATA, IMAGE_DATA_INDEX) in LI_DATA">

                <img :src="IMAGE_DATA[0]" :alt="IMAGE_DATA[0]" class="image_list_to_inline_tag_and_smaller">

<span v-for="(IMAGE_TAG, IMAGE_TAG_INDEX) in IMAGE_DATA[1]"><button class="article_button image_tag" @click="set_data_to_content({'filter_by_tag': index_to_tag_name(IMAGE_TAG)})">{{ index_to_tag_name(IMAGE_TAG) }}</button></span>
                </template>
            </template>
            </ul>
            <br>
        </li>
    </template>
</ul>
</main>
<article>
<ul>
<li v-for="(SORT_RULE, SORT_RULE_INDEX) in sort_rule_list"><button class="article_button" @click="set_data_to_content(SORT_RULE)">{{ SORT_RULE }}</button></li>
</ul>
<ul>
<!-- <li v-for="(TAG, TAG_INDEX) in tag_list"><button class="article_button" @click="set_data_to_content({'filter_by_tag': TAG})">{{ TAG }}</button></li> -->
    <li v-for="(TAG, TAG_INDEX) in tag_list_with_volume_sorted">
    <button class="article_button" @click="set_data_to_content({'filter_by_tag': TAG[0]})">
        <div>{{ TAG[0] }}</div>
        <div>{{ TAG[1] }}</div>
    </button>
    </li>
<!-- <li v-for="(TAG, TAG_INDEX) in tag_list_with_volume_sorted"><button class="article_button">{{ TAG }}</button></li> -->
</ul>
<!-- <ul>
<li v-for="(PREFECTURE, PREFECTURE_INDEX) in sample_list_0"><button class="article_button" @click="set_data_to_content({'filter_by_pre': PREFECTURE})">{{ PREFECTURE }}</button></li>
</ul> -->
</article>
<footer>
<ul>
<li>def</li>
<li>def</li>
<li>def</li>
<li>def</li>
<li>def</li>
<li>def</li>
</ul>
</footer>
</body>
<script>
const app = Vue.createApp({
data() {
    return {
content_data: [1,2,3,4,100],
tag_list: prefectures_of_japan_list_concat_tag_list,
tag_list_with_volume_sorted: [],

current_filter: null,
current_sorter: null,
sort_rule_list: [
    {'sort_by_number_0': 'asc'},
    {'sort_by_number_0': 'desc'},
    {'sort_by_number_1': 'asc'},
    {'sort_by_number_1': 'desc'},
],
// sample_list_0: prefectures_of_japan_list_concat_tag_list,
// sample_list_1: prefectures_of_japan_list_alphabet_1222_0_1_2,

// const sample_list_2[0] = [
// "prefecture", // 0
// "alphabet_of_one", // 1
// "prefecture_alphabet_of_one", // 2
// "sample_str_0", // 3
// "sample_str_1", // 4
// "sample_number_0", // 5
// "sample_number_1", // 6
// "sample_time_0", // 7
// "sample_time_1", // 8
// ];
// sample_list_2: prefectures_of_japan_list_alphabet_1222_0_1_2_with_sample_data_array,
// sample_list_3: prefectures_of_japan_list_alphabet_1222_0_1_2_with_sample_data_array_and_random_tag_index_1_10_length_array,

// sample_list_4: prefectures_of_japan_list_alphabet_1222_0_1_2_with_sample_data_array_and_random_tag_index_1_10_length_array_with_file_name_number,

// sample_list_4: NEW_prefectures_of_japan_list_alphabet_1222_0_1_2_with_sample_data_array_and_random_tag_index_1_10_length_array_with_file_name_number,
// sample_list_4: NEW_2_prefectures_of_japan_list_alphabet_1222_0_1_2_with_sample_data_array_and_random_tag_index_1_10_length_array_with_file_name_number,
sample_list_4: NEW_3_prefectures_of_japan_list_alphabet_1222_0_1_2_with_sample_data_array_and_random_tag_index_1_10_length_array_with_file_name_number,
    }
},
beforeMounte(){
},
mounted() {
    document.querySelectorAll(`.article_button`)[0].click();
    this.show_each_tag_volume();
},
updated() {
    // this.make_img_from_canvas();
},
methods: {
filter_by_rule(FILTER_OBJ, LIST_PARAM){
    // const filter_by_pre = (OBJ, LIST) => LIST.filter(V=>Object.values(OBJ)[0] === V[0]);
    const filter_by_tag = (OBJ, LIST) => {
        const TMP_LIST = LIST.filter(V=>V[9].map(VAL=>this.index_to_tag_name(VAL)).includes(Object.values(OBJ)[0]));
        const RESULT_LIST = TMP_LIST.length > 0 ? TMP_LIST : LIST;
        return RESULT_LIST;
    };
    const choose_filter = OBJ => {
        switch (Object.keys(OBJ)[0]) {
            // case "filter_by_pre":
            //         return filter_by_pre;
            //     break;
            case "filter_by_tag":
                    return filter_by_tag;
                break;
            default:
                break;
        }
    }
    const filter_by = (OBJ, LIST) => choose_filter(OBJ)(OBJ, LIST);
    return filter_by(FILTER_OBJ, this.sample_list_4);
},
sort_by_rule(SORT_OBJ, LIST){
    const sort_by_number_0_asc = (OBJ, LIST_PARAM) => LIST_PARAM.sort((a,b)=>{return a[5] - b[5]});
    const sort_by_number_0_desc = (OBJ, LIST_PARAM) => LIST_PARAM.sort((a,b)=>{return b[5] - a[5]});
    const sort_by_number_1_asc = (OBJ, LIST_PARAM) => LIST_PARAM.sort((a,b)=>{return a[6] - b[6]});
    const sort_by_number_1_desc = (OBJ, LIST_PARAM) => LIST_PARAM.sort((a,b)=>{return b[6] - a[6]});
    const choose_sorter = OBJ => {
        switch (Object.keys(OBJ)[0]) {
            case "sort_by_number_0":
                    return Object.values(OBJ)[0] === 'asc' ? sort_by_number_0_asc : sort_by_number_0_desc;
                break;
            case "sort_by_number_1":
                    return Object.values(OBJ)[0] === 'asc' ? sort_by_number_1_asc : sort_by_number_1_desc;
                break;
            default:
                break;
        }
    };
    const sort_by = (OBJ, LIST_PARAM) => choose_sorter(OBJ)(OBJ, LIST_PARAM);
    return sort_by(SORT_OBJ, LIST);
},
set_data_to_content(FILTER_OBJ){
    this.current_filter = Object.keys(FILTER_OBJ)[0].includes('filter') ? FILTER_OBJ : this.current_filter;
    this.current_sorter = Object.keys(FILTER_OBJ)[0].includes('sort') ? FILTER_OBJ : this.current_sorter;
    const filtered_list = this.current_filter ? this.filter_by_rule(this.current_filter, this.sample_list_4) : this.sample_list_4;
    const filtered_list_convert_index_to_tag_name_and_display = this.convert_index_to_tag_name_and_display(filtered_list);
    const sorted_list = this.current_sorter ? this.sort_by_rule(this.current_sorter, filtered_list_convert_index_to_tag_name_and_display) : filtered_list_convert_index_to_tag_name_and_display;
    this.content_data = sorted_list;
},
index_to_tag_name(INDEX){
    return this.tag_list[INDEX];
},
file_name_number_to_file_url(PRE, PRE_ALPH, FILE_NAME_NUMBER){
    return "https://raw.githubusercontent.com/taroyanaka/javascript/master/image/image_for_multi/"+PRE+"_"+PRE_ALPH+"_"+FILE_NAME_NUMBER+".png";
},
file_with_a_number_and_tag(PRE, PRE_ALPH, FILE_NAME_NUMBER){
    const FILE_THE_NUMBER = random_number_from_min_to_max(1, 100000);
    // return [[PRE, PRE_ALPH, FILE_NAME_NUMBER].join("_"), FILE_THE_NUMBER, TAG_LIST];
},
make_image_tag_list_and_url_list_pair(LIST, IDX){
    const [url_list, image_tag_list, image_price_list] = [LIST[13], LIST[11], number_list_for_img[IDX]];
    return R.transpose([url_list, image_tag_list, image_price_list]);
},
convert_index_to_tag_name_and_display(LIST){
    const tmp_list_added_tag_name_list = LIST.map(V=>
                        V.concat(
                            [ V[9].map(TAG_INDEX=>this.index_to_tag_name(TAG_INDEX)) ]
                        )
                    );
    const tmp_list_2_added_image_url_list = tmp_list_added_tag_name_list.map(V=>
                            V.concat(
                                [V[10].map(VAL=>this.file_name_number_to_file_url(V[0], V[1], VAL))]
                            )
                        );
    const tmp_list_3_added_image_url_list_and_image_tag_list = tmp_list_2_added_image_url_list.map((V,IDX)=>
                            V.concat(
                                [this.make_image_tag_list_and_url_list_pair(V, IDX)]
                            )
                        );
    // console.log(tmp_list_3_added_image_url_list_and_image_tag_list);
    return tmp_list_3_added_image_url_list_and_image_tag_list;
},
clear_current_filter_and_sorter(){
    this.current_filter = null;
    this.current_sorter = null;
    this.set_data_to_content();
},
show_each_tag_volume(){
    const tag_list = this.tag_list;
    const tag_list_length = tag_list.length;
    const tag_list_with_volume = tag_list.map((V, I)=>{
        const volume = this.sample_list_4.filter(V2=>V2[9].includes(I)).length;
        return [V, volume];
    });
    this.tag_list_with_volume_sorted = tag_list_with_volume.sort((a,b)=>{return b[1] - a[1]});
},

},
}).mount('.app');


// R.transpose([prefectures_of_japan_list_alphabet_1222_0_1_2, sample_data_array]).map(V=>V[0].concat(V[1]));

// prefectures_of_japan_list_alphabet_1222_0_1_2_with_sample_data_array.map(V=>V.concat(
//     [R.uniq(random_length_array(R.range(0, 10)).map(V=> random_number_from_min_to_max(1, 103)))
//      ]
//     ))

// shuffle arrray
// https://stackoverflow.com/questions/2450954/how-to-randomize-shuffle-a-javascript-array
function shuffle(array) {
  let currentIndex = array.length,  randomIndex;

  // While there remain elements to shuffle.
  while (currentIndex != 0) {

    // Pick a remaining element.
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex--;

    // And swap it with the current element.
    [array[currentIndex], array[randomIndex]] = [
      array[randomIndex], array[currentIndex]];
  }

  return array;
}

// random number from min to max
function random_number_from_min_to_max(min, max) {
  return Math.floor(Math.random() * (max - min + 1) + min);
}

// random length array
function random_length_array(array) {
  return array.slice(0, random_number_from_min_to_max(1, array.length));
}


// R.uniq(random_length_array(R.range(0, 10)).map(V=> random_number_from_min_to_max(1, 103))).sort(function(a,b){return a - b}).map(V=>V.toString());


// const file_names = prefectures_of_japan_list_alphabet_1222_0_1_2.map(VAL=>
//     R.uniq(random_length_array(R.range(0, 10)).map(V=> random_number_from_min_to_max(1, 103))).sort(function(a,b){return a - b}).map(V=>VAL[2]+"_"+V.toString())
//     )


// prefectures_of_japan_list_alphabet_1222_0_1_2_with_sample_data_array_and_random_tag_index_1_10_length_array_with_file_name_number.map(V=>R.update(9, V[9].map(VAL=>VAL+47), V))
// NEW_prefectures_of_japan_list_alphabet_1222_0_1_2_with_sample_data_array_and_random_tag_index_1_10_length_array_with_file_name_number.map(V=> R.update(9, [prefectures_of_japan_list.indexOf(V[0])].concat(V[9]), V))
// prefectures_of_japan_list.concat(tag_list)

// shuffle(prefectures_of_japan_list_concat_tag_list.map((V,IDX)=>IDX).slice(47, -1)).slice(0, 10)
// NEW_2_prefectures_of_japan_list_alphabet_1222_0_1_2_with_sample_data_array_and_random_tag_index_1_10_length_array_with_file_name_number.map(V=>R.insert(-1, V[10].map(VAL=>[V[9][0]].concat(shuffle(prefectures_of_japan_list_concat_tag_list.map((V,IDX)=>IDX).slice(47, -1)).slice(0, 5))), V));


</script>
</html>