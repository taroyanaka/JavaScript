<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>simple_io_for_server_side</title>
<script src="./ramda.@0.28.0.js"></script>
<link rel="stylesheet" href="./reset.css">
<link rel="stylesheet" href="./cssui.min.css">
<script src="./vue@3.2.36.global.prod.js"></script>
<script src="./validator@13.7.0/validator.min.js"></script>
</head>
<body class="app">
<button @click="fetch_all">fetch_all</button>
<ul>
<li v-for="(LI_DATA_ARRAY, LI_DATA_ARRAY_INDEX) in all_data">
{{ LI_DATA_ARRAY }}
<button @click="delete_record(LI_DATA_ARRAY[0][0])">delete_record:{{ LI_DATA_ARRAY[0][0] }}</button>
<!-- ID: {{ LI_DATA_ARRAY.ID }}
MAIN: {{ LI_DATA_ARRAY.MAIN }}
<ul>
<span>COMMENT_ID: {{ LI_DATA_ARRAY.COMMENT_ID ? LI_DATA_ARRAY.COMMENT_ID : null }}</span>
<span>{{ '  '}}</span>
<span>COMMENT: {{ LI_DATA_ARRAY.COMMENT ? LI_DATA_ARRAY.COMMENT : null }}</span>
</ul>
<button @click="update_main(LI_DATA_ARRAY['id'], LI_DATA_ARRAY['main'])">update_main</button>
<input type="text" name="" class="" v-model="LI_DATA_ARRAY['main']"> -->
</li>
</ul>
<!-- <input type="text" name="" id="" v-model="sample"> -->
<input type="text" name="" id="" v-model="main" placeholder="main text">
<input type="button" id="" @click="insert_record" value="insert_record">
</body>
<script>
let tmp = [];
let main_only = [];
let comment_only = [];
let main_with_comment = [];
const app = Vue.createApp({
data() {
    return {
sample: 'foo',
main: 'MAIN TEXT',
all_data: [],
main_only: [],
comment_only: [],
    }
},
mounted(){
    this.fetch_all();
},
methods: {
async FN_A(FETCH_DATA){
    const JSON_DATA = await FETCH_DATA.json();
    this.all_data = [];
    for (const DATA of JSON_DATA ) {
        console.log(DATA);
        this.all_data.push(DATA);
    };
    // tmp = R.flatten(this.all_data);
},
async update_main(ID, MAIN){
    if(
validator.isNumeric(ID.toString(), {no_symbols: true}) === false
||
validator.isLength(MAIN, {min:1, max: 20}) === false) return;
    const FETCH_DATA = await fetch(`http://127.0.0.1:3000/update_main?ID=${(ID).toString()}&MAIN=${MAIN}`);
    await this.FN_A(FETCH_DATA);
},
async fetch_all() {
    const FETCH_DATA = await fetch('http://127.0.0.1:3000/');
    await this.FN_A(FETCH_DATA);
},
async delete_record(ID) {
    if(validator.isNumeric(ID.toString(), {no_symbols: true}) === false) return;
    const FETCH_DATA = await fetch(`http://127.0.0.1:3000/delete_record?ID=${ID}`);
    await this.FN_A(FETCH_DATA);
},
async insert_record() {
    if(validator.isLength(this.main, {min:1, max: 20}) === false) return;
    const FETCH_DATA = await fetch(`http://127.0.0.1:3000/insert_record?MAIN=${this.main}`);
    await this.FN_A(FETCH_DATA);
},
},
}).mount('.app');
</script>
</html>